# 闭包

### 是什么

浏览器在加载页面会把代码放在栈内存（ ECStack ）中执行，函数进栈执行会产生一个私有上下文（ EC ），此上下文能保护里面的使用变量（ AO ）不受外界干扰，并且如果当前执行上下文中的某些内容，被上下文以外的内容占用，当前上下文不会出栈释放，这样可以保存里面的变量和变量值，所以我认为闭包是一种**保存内部私有变量的机制**。

### 特点

1. 可以访问父级作用域中的变量：在函数内部通过闭包可以访问并修改父级作用域的变量，而且这些变量在函数执行完毕后依然存在。

2. 可以将变量私有化：使用闭包可以将某些变量私有化，避免全局变量污染和变量冲突问题，同时也增加了代码的可维护性。

```javascript
function createCounter() {
  let count = 0; // 私有变量，外部无法直接访问
  return {
    increment: () => count++,
    getCount: () => count,
  };
}

const counter = createCounter();
counter.increment();
console.log(counter.getCount()); // 1（通过闭包访问私有变量count）
```

3. 可以实现模块化：使用闭包可以将一些相关方法或属性封装在一个作用域内，形成一个独立的模块，从而提高代码的复用性和可读性。

### 应用场景

- useEffect 中根据信号量解决请求竞态问题
- 防抖和节流函数通过闭包保存定时器 ID 或时间戳，实现函数执行频率控制。
