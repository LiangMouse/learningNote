# 浏览器进程架构

## 进程架构

这里拿最为流行的`Chrome`做讲解。

最新的 Chrome 浏览器包括：1 个浏览器（Browser）主进程、1 个 GPU 进程、1 个网络（NetWork）进程、多个渲染进程和多个插件进程。

### 浏览器主进程

负责界面显示、用户交互、子进程管理，同时提供存储等功能。如 Tab 前进，后退收藏等

### 渲染进程

核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，排版引擎 Blink 和 JavaScript 引擎 V8 都是运行在该进程中，默认情况下，Chrome 会为每个 Tab 标签创建一个渲染进程。不同 Tab 不同进程进行隔离，避免页面的错误进行全局崩溃。出于安全考虑，渲染进程都是运行在沙箱模式下。

### GPU 进程

GPU 的使用初衷是为了实现 3D CSS 的效果，随后网页、Chrome 的 UI 界面都选择采用 GPU 来绘制，这使得 GPU 成为浏览器普遍的需求。

### 网络进程

负责页面的网络资源加载

### 插件进程

负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。

> 参考资料:
> [浏览器工作原理与实践](https://blog.poetries.top/browser-working-principle/guide/part1/lesson01.html#%E5%8D%95%E8%BF%9B%E7%A8%8B%E6%B5%8F%E8%A7%88%E5%99%A8%E6%97%B6%E4%BB%A3)

## 渲染进程下的线程

渲染进程里的 5 大线程：

- JS 引擎线程：执行 JS 脚本
- GUI 线程：渲染浏览器页面、重绘回流，与 JS 引擎线程互斥，不能同时执行
- 事件触发线程：负责事件循环
- 定时器线程：负责定时器
- 网络请求线程：负责网络请求
